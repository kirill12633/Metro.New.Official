<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Метро New - Правила сообщества сервера Discord</title>

    <!-- Для старых браузеров -->
    <link rel="shortcut icon" href="https://kirill12633.github.io/Metro.New.Official/ru/images/metro-icon.png" type="image/png">
    
    <!-- Для устройств Apple -->
    <link rel="apple-touch-icon" href="https://kirill12633.github.io/Metro.New.Official/ru/images/metro-icon.png">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase JS SDK v9 (modular, recommended) -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
        import { 
            getAuth, 
            onAuthStateChanged, 
            signInWithEmailAndPassword, 
            createUserWithEmailAndPassword, 
            signOut, 
            sendPasswordResetEmail, 
            updateProfile, 
            sendEmailVerification, 
            signInAnonymously,
            GoogleAuthProvider,
            signInWithPopup,
            linkWithPopup,
            updatePassword,
            reauthenticateWithCredential,
            EmailAuthProvider
        } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-storage.js";
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDNAyhui3Lc_IX0wuot7_Z6Vdf9Bw5A9mE",
            authDomain: "metro-new-85226.firebaseapp.com",
            databaseURL: "https://metro-new-85226-default-rtdb.firebaseio.com",
            projectId: "metro-new-85226",
            storageBucket: "metro-new-85226.firebasestorage.app",
            messagingSenderId: "905640751733",
            appId: "1:905640751733:web:f1ab3a1b119ca1e245fe3c"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);
        const googleProvider = new GoogleAuthProvider();
        
        // Настройки Google Provider
        googleProvider.addScope('profile');
        googleProvider.addScope('email');
        googleProvider.setCustomParameters({
            prompt: 'select_account'
        });
        
        // Make available globally
        window.firebaseApp = app;
        window.auth = auth;
        window.db = db;
        window.storage = storage;
        window.googleProvider = googleProvider;
        window.firebaseModules = {
            onAuthStateChanged,
            signInWithEmailAndPassword,
            createUserWithEmailAndPassword,
            signOut,
            sendPasswordResetEmail,
            updateProfile,
            sendEmailVerification,
            signInAnonymously,
            signInWithPopup,
            linkWithPopup,
            GoogleAuthProvider,
            updatePassword,
            reauthenticateWithCredential,
            EmailAuthProvider,
            doc,
            setDoc,
            getDoc,
            updateDoc,
            ref,
            uploadBytes,
            getDownloadURL,
            deleteObject
        };
        
        console.log('Firebase v9 успешно инициализирован');
    </script>
    
    <style>
        :root {
            --primary: #0066CC;
            --primary-dark: #0052a3;
            --primary-light: #4d94ff;
            --secondary: #FFD700;
            --secondary-dark: #e6c200;
            --dark: #1A1A1A;
            --light: #F8F9FA;
            --gray: #6C757D;
            --gray-light: #e9ecef;
            --success: #28A745;
            --warning: #FFC107;
            --danger: #DC3545;
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 25px rgba(0,0,0,0.2);
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 15px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: var(--light);
            color: var(--dark);
        }
        
        main {
            flex: 1;
        }
        
        .main-header {
            background-color: white;
            border-bottom: 1px solid var(--gray-light);
            padding: 0.75rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-md);
        }
        
        .header-container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1.5rem;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            min-width: 200px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            text-decoration: none;
            color: var(--dark);
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.3rem;
        }
        
        .header-center {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .breadcrumbs {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
            color: var(--gray);
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .breadcrumb-item a {
            color: var(--dark);
            text-decoration: none;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-md);
            transition: all 0.3s;
        }
        
        .breadcrumb-item a:hover {
            background-color: var(--gray-light);
        }
        
        .breadcrumb-current {
            color: var(--primary);
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            background-color: rgba(0, 102, 204, 0.1);
            border-radius: var(--radius-md);
        }
        
        .breadcrumb-separator {
            color: var(--gray);
            font-size: 0.8rem;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
            min-width: 300px;
            justify-content: flex-end;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            border: 2px solid var(--gray-light);
            min-width: 200px;
        }
        
        .user-profile:hover {
            background-color: var(--gray-light);
            border-color: var(--primary);
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .user-avatar i {
            font-size: 1.8rem;
        }
        
        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .user-info {
            display: flex;
            flex-direction: column;
            gap: 0.1rem;
            flex: 1;
            min-width: 0;
        }
        
        .user-name {
            font-weight: 600;
            font-size: 0.95rem;
            color: var(--dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .user-email {
            font-size: 0.8rem;
            color: var(--gray);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background-color: white;
            border: 1px solid var(--gray-light);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            min-width: 300px;
            padding: 0.5rem;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s;
            z-index: 1001;
        }
        
        .user-profile.active .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .dropdown-header {
            padding: 1rem;
            border-bottom: 1px solid var(--gray-light);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .dropdown-header .user-avatar {
            width: 48px;
            height: 48px;
        }
        
        .dropdown-header .user-info {
            flex: 1;
            min-width: 0;
        }
        
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: var(--dark);
            text-decoration: none;
            border-radius: var(--radius-md);
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-size: 0.9rem;
        }
        
        .dropdown-item:hover {
            background-color: var(--gray-light);
        }
        
        .dropdown-item.logout {
            color: var(--danger);
        }
        
        .dropdown-item.logout:hover {
            background-color: rgba(220, 53, 69, 0.1);
        }
        
        /* Модальные окна */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background-color: white;
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .modal-header h3 {
            color: var(--dark);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--gray);
            cursor: pointer;
            line-height: 1;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            color: var(--dark);
        }
        
        .modal-body {
            padding: 2rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
        }
        
        .form-group input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--gray-light);
            border-radius: var(--radius-md);
            font-size: 1rem;
            color: var(--dark);
            background-color: white;
            transition: all 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-lg);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 0.95rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: var(--shadow-md);
            width: 100%;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-secondary {
            background: var(--gray-light);
            color: var(--dark);
            width: 100%;
        }
        
        .btn-secondary:hover {
            background: var(--gray);
            color: white;
        }
        
        .auth-divider {
            text-align: center;
            margin: 1.5rem 0;
            position: relative;
        }
        
        .auth-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background-color: var(--gray-light);
        }
        
        .auth-divider span {
            background-color: white;
            padding: 0 1rem;
            color: var(--gray);
            position: relative;
            z-index: 1;
            font-size: 0.9rem;
        }
        
        .social-auth {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .btn-social {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-lg);
            border: 1px solid var(--gray-light);
            background-color: white;
            color: var(--dark);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .btn-social:hover {
            background-color: var(--gray-light);
        }
        
        .btn-social.google {
            border-color: #DB4437;
            color: #DB4437;
        }
        
        .btn-social.google:hover {
            background-color: rgba(219, 68, 55, 0.1);
        }
        
        .auth-error {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--danger);
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            margin-top: 1rem;
            font-size: 0.9rem;
            display: none;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 15px;
        }
        
        .page-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: var(--radius-xl);
            padding: 3rem 2rem;
            color: white;
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .page-header .breadcrumbs {
            color: rgba(255, 255, 255, 0.9);
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        .page-header .breadcrumb-item a {
            color: white;
        }
        
        .page-header .breadcrumb-current {
            color: var(--secondary);
            background-color: rgba(255, 215, 0, 0.2);
        }
        
        .page-description {
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .discord-rules {
            margin: 3rem 0;
        }
        
        .rules-container {
            background-color: white;
            border-radius: var(--radius-xl);
            padding: 2rem;
            box-shadow: var(--shadow-md);
            overflow: hidden;
        }
        
        .rules-iframe {
            width: 100%;
            height: 600px;
            border: none;
            border-radius: var(--radius-lg);
            overflow: hidden;
        }
        
        .rules-note {
            text-align: center;
            margin-top: 1rem;
            color: var(--gray);
            font-size: 0.9rem;
            font-style: italic;
        }
        
        .main-footer {
            background-color: var(--dark);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 3rem;
        }
        
        .footer-container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-column h4 {
            color: var(--secondary);
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .footer-column ul {
            list-style: none;
            padding-left: 0;
        }
        
        .footer-column li {
            margin-bottom: 0.75rem;
        }
        
        .footer-column a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .footer-column a:hover {
            color: var(--secondary);
        }
        
        .social-links {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        
        .social-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s;
            padding: 0.5rem;
            border-radius: var(--radius-md);
        }
        
        .social-link:hover {
            color: var(--secondary);
            background-color: rgba(255, 215, 0, 0.1);
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .copyright {
            color: rgba(255, 255, 255, 0.7);
        }
        
        @media (max-width: 1024px) {
            .header-container {
                flex-wrap: wrap;
                gap: 1rem;
            }
            
            .header-left {
                order: 1;
                min-width: auto;
            }
            
            .header-center {
                order: 3;
                width: 100%;
                margin-top: 1rem;
            }
            
            .header-right {
                order: 2;
                min-width: auto;
            }
            
            .user-profile {
                min-width: auto;
            }
        }
        
        @media (max-width: 768px) {
            .header-right {
                gap: 0.5rem;
            }
            
            .user-info {
                display: none;
            }
            
            .user-profile {
                padding: 0.5rem;
                min-width: auto;
            }
            
            .dropdown-menu {
                min-width: 280px;
                right: -50px;
            }
            
            .breadcrumbs {
                font-size: 0.85rem;
            }
            
            .page-header h1 {
                font-size: 2rem;
            }
            
            .page-description {
                font-size: 1rem;
            }
            
            .rules-iframe {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <!-- ХЕДЕР -->
    <header class="main-header">
        <div class="header-container">
            <div class="header-left">
                <a href="https://kirill12633.github.io/Metro.New.Official/" class="logo">
                    <span class="logo-icon">M</span>
                    <span>Метро New</span>
                </a>
            </div>
            
            <div class="header-center">
                <nav class="breadcrumbs">
                    <div class="breadcrumb-item">
                        <a href="https://kirill12633.github.io/Metro.New.Official/">Главная</a>
                        <span class="breadcrumb-separator">›</span>
                    </div>
                    <div class="breadcrumb-item">
                        <a href="https://kirill12633.github.io/Metro.New.Official/ru/help">Правовые документы</a>
                        <span class="breadcrumb-separator">›</span>
                    </div>
                    <div class="breadcrumb-item">
                        <span class="breadcrumb-current">Правила Discord</span>
                    </div>
                </nav>
            </div>
            
            <div class="header-right">
                <!-- Меню профиля с Firebase -->
                <div class="user-profile" id="userProfile">
                    <div class="user-avatar" id="userAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="userName">Гость</div>
                        <div class="user-email" id="userEmail">Войти в аккаунт</div>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                    
                    <!-- Выпадающее меню -->
                    <div class="dropdown-menu" id="dropdownMenu">
                        <!-- Заполнится через Firebase -->
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ОСНОВНОЙ КОНТЕНТ -->
    <main class="container">
        <section class="page-header">
            <nav class="breadcrumbs">
                <div class="breadcrumb-item">
                    <a href="https://kirill12633.github.io/Metro.New.Official/">Главная</a>
                    <span class="breadcrumb-separator">›</span>
                </div>
                <div class="breadcrumb-item">
                    <a href="https://kirill12633.github.io/Metro.New.Official/ru/help">Правовые документы</a>
                    <span class="breadcrumb-separator">›</span>
                </div>
                <div class="breadcrumb-item">
                    <span class="breadcrumb-current">Правила Discord</span>
                </div>
            </nav>
            
            <h1>Правила сообщества сервера Discord</h1>
            <p class="page-description">Ознакомьтесь с правилами нашего сообщества Discord. Соблюдение этих правил обеспечивает комфортную атмосферу для всех участников и помогает поддерживать порядок на нашем сервере.</p>
        </section>
        
        <section class="discord-rules">
            <div class="rules-container">
                <h2><i class="fab fa-discord"></i> Правила сообщества сервера Discord</h2>
                <iframe src="https://docs.google.com/document/d/e/2PACX-1vTJkl7bVtTlgzpVSOl3nFcaPp_PbbC2z7Rkxf9ICY-C4pd-dpoh2yy7yFudc2tjwROvi_O6pPOeXiQi/pub?embedded=true" 
                        class="rules-iframe"
                        title="Правила сообщества Discord Метро New">
                </iframe>
                <p class="rules-note">Если документ не загружается, перейдите по прямой ссылке: 
                    <a href="https://docs.google.com/document/d/e/2PACX-1vTJkl7bVtTlgzpVSOl3nFcaPp_PbbC2z7Rkxf9ICY-C4pd-dpoh2yy7yFudc2tjwROvi_O6pPOeXiQi/pub" target="_blank">
                        Открыть правила в новом окне
                    </a>
                </p>
            </div>
        </section>
    </main>

    <!-- ФУТЕР -->
    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h4><i class="fas fa-info-circle"></i> Информация</h4>
                    <ul>
                        <li><a href="https://kirill12633.github.io/Metro.New.Official/">Главная</a></li>
                        <li><a href="https://kirill12633.github.io/Metro.New.Official/ru/games">Игры</a></li>
                        <li><a href="https://kirill12633.github.io/Metro.New.Official/ru/news">Новости</a></li>
                        <li><a href="https://kirill12633.github.io/Metro.New.Official/ru/about">О проекте</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4><i class="fas fa-file-contract"></i> Документы</h4>
                    <ul>
                        <li><a href="https://kirill12633.github.io/Metro.New.Official/ru/help/privacy-policy">Политика конфиденциальности</a></li>
                        <li><a href="https://kirill12633.github.io/Metro.New.Official/ru/help/terms-of-service">Пользовательское соглашение</a></li>
                        <li><a href="https://kirill12633.github.io/Metro.New.Official/ru/help/community-guidelines">Правила сообщества</a></li>
                        <li><a href="https://kirill12633.github.io/Metro.New.Official/ru/help/copyright-policy">Политика авторских прав</a></li>
                        <li><a href="https://kirill12633.github.io/Metro.New.Official/ru/help/site-guidelines">Правила сайта</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4><i class="fas fa-headset"></i> Поддержка</h4>
                    <ul>
                        <li><a href="https://kirill12633.github.io/support.metro.new/">Техническая поддержка</a></li>
                        <li><a href="https://kirill12633.github.io/status.metro.new/">Статус сервисов</a></li>
                        <li><a href="mailto:metro.new.help@gmail.com">Написать на почту</a></li>
                        <li><a href="https://kirill12633.github.io/Metro.New.Official/ru/help/faq">Частые вопросы</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4><i class="fas fa-share-alt"></i> Социальные сети</h4>
                    <div class="social-links">
                        <a href="https://discord.com/invite/WjGZBs3HMX" class="social-link" target="_blank">
                            <i class="fab fa-discord"></i>
                            <span>Discord</span>
                        </a>
                        <a href="https://t.me/Metro_New_Official" class="social-link" target="_blank">
                            <i class="fab fa-telegram"></i>
                            <span>Telegram</span>
                        </a>
                        <a href="https://www.youtube.com/@Metro-RP-NEW-Roblox" class="social-link" target="_blank">
                            <i class="fab fa-youtube"></i>
                            <span>YouTube</span>
                        </a>
                        <a href="https://www.roblox.com/communities/34820737/RP-NEW" class="social-link" target="_blank">
                            <i class="fab fa-roblox"></i>
                            <span>Roblox</span>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="copyright">
                    <p>&copy; <span id="currentYear"></span> Метро New. Все права защищены.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- МОДАЛЬНОЕ ОКНО ВХОДА -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-sign-in-alt"></i> Вход в аккаунт</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmail" placeholder="example@mail.ru" required>
                    </div>
                    <div class="form-group">
                        <label>Пароль</label>
                        <input type="password" id="loginPassword" placeholder="••••••••" required>
                    </div>
                    <button type="submit" class="btn btn-primary" id="loginSubmitBtn">
                        <i class="fas fa-sign-in-alt"></i>
                        Войти
                    </button>
                    <div class="auth-error" id="loginError"></div>
                </form>
                
                <div class="auth-divider">
                    <span>или войдите через</span>
                </div>
                
                <div class="social-auth">
                    <button class="btn-social google" id="googleLoginBtn">
                        <i class="fab fa-google"></i>
                        Войти через Google
                    </button>
                    <button class="btn-social" id="guestLoginBtn">
                        <i class="fas fa-user-secret"></i>
                        Продолжить как гость
                    </button>
                </div>
                
                <div style="margin-top: 1.5rem; text-align: center;">
                    <p style="font-size: 0.9rem; color: var(--gray);">
                        Нет аккаунта? 
                        <a href="#" id="showRegisterBtn" style="color: var(--primary); text-decoration: none; font-weight: 600;">Зарегистрироваться</a>
                    </p>
                    <p style="font-size: 0.9rem; color: var(--gray); margin-top: 0.5rem;">
                        <a href="https://kirill12633.github.io/Metro.New.Official/ru/account/change-password" id="forgotPasswordBtn" style="color: var(--primary); text-decoration: none;">Забыли пароль?</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- МОДАЛЬНОЕ ОКНО РЕГИСТРАЦИИ -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Регистрация</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="registerForm">
                    <div class="form-group">
                        <label>Имя пользователя</label>
                        <input type="text" id="registerUsername" placeholder="MetroDriver" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="registerEmail" placeholder="example@mail.ru" required>
                    </div>
                    <div class="form-group">
                        <label>Пароль</label>
                        <input type="password" id="registerPassword" placeholder="••••••••" required>
                    </div>
                    <div class="form-group">
                        <label>Подтвердите пароль</label>
                        <input type="password" id="registerConfirmPassword" placeholder="••••••••" required>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: flex-start; gap: 0.5rem; cursor: pointer;">
                            <input type="checkbox" id="agreeTerms" required style="width: auto; margin-top: 0.25rem;">
                            <span style="font-size: 0.9rem;">
                                Я согласен с 
                                <a href="https://kirill12633.github.io/Metro.New.Official/ru/help/terms-of-service/" target="_blank" style="color: var(--primary);">пользовательским соглашением</a>
                                и 
                                <a href="https://kirill12633.github.io/Metro.New.Official/ru/help/privacy-policy/" target="_blank" style="color: var(--primary);">политикой конфиденциальности</a>
                            </span>
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary" id="registerSubmitBtn">
                        <i class="fas fa-user-plus"></i>
                        Зарегистрироваться
                    </button>
                    <div class="auth-error" id="registerError"></div>
                </form>
                
                <div class="auth-divider">
                    <span>или</span>
                </div>
                
                <button class="btn-social google" id="googleRegisterBtn">
                    <i class="fab fa-google"></i>
                    Зарегистрироваться через Google
                </button>
                
                <div style="margin-top: 1.5rem; text-align: center;">
                    <p style="font-size: 0.9rem; color: var(--gray);">
                        Уже есть аккаунт? 
                        <a href="#" id="showLoginBtn" style="color: var(--primary); text-decoration: none; font-weight: 600;">Войти</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            // Ждем инициализации Firebase
            await waitForFirebase();
            
            // Устанавливаем текущий год
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // Обновляем заголовок страницы
            updatePageTitle();
            
            // Инициализируем приложение
            initApp();
        });

        async function waitForFirebase() {
            return new Promise((resolve) => {
                const check = setInterval(() => {
                    if (window.auth && window.db && window.storage) {
                        clearInterval(check);
                        resolve();
                    }
                }, 100);
            });
        }

        function updatePageTitle() {
            const pageTitle = "Правила сообщества сервера Discord";
            document.title = `Метро New - ${pageTitle}`;
            
            // Обновляем заголовок вверху страницы
            const headerBreadcrumbs = document.querySelector('.header-center .breadcrumbs');
            if (headerBreadcrumbs) {
                headerBreadcrumbs.innerHTML = `
                    <div class="breadcrumb-item">
                        <a href="https://kirill12633.github.io/Metro.New.Official/">Главная</a>
                        <span class="breadcrumb-separator">›</span>
                    </div>
                    <div class="breadcrumb-item">
                        <a href="https://kirill12633.github.io/Metro.New.Official/ru/help">Правовые документы</a>
                        <span class="breadcrumb-separator">›</span>
                    </div>
                    <div class="breadcrumb-item">
                        <span class="breadcrumb-current">${pageTitle}</span>
                    </div>
                `;
            }
        }

        function initApp() {
            // Получаем элементы
            const userProfile = document.getElementById('userProfile');
            const userName = document.getElementById('userName');
            const userEmail = document.getElementById('userEmail');
            const userAvatar = document.getElementById('userAvatar');
            const dropdownMenu = document.getElementById('dropdownMenu');
            
            // Модальные окна
            const loginModal = document.getElementById('loginModal');
            const registerModal = document.getElementById('registerModal');
            
            // Кнопки закрытия модальных окон
            document.querySelectorAll('.modal-close').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('.modal').classList.remove('show');
                });
            });
            
            // Закрытие модальных окон при клике вне
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('show');
                    }
                });
            });
            
            // Переключение меню профиля
            userProfile.addEventListener('click', function(e) {
                e.stopPropagation();
                this.classList.toggle('active');
            });
            
            // Закрытие меню при клике вне его
            document.addEventListener('click', function() {
                userProfile.classList.remove('active');
            });
            
            // Предотвращаем закрытие при клике внутри меню
            dropdownMenu.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            // Проверка состояния аутентификации
            checkAuthState();
            
            // Инициализация форм
            initForms();
        }

        function checkAuthState() {
            const { onAuthStateChanged } = window.firebaseModules;
            
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    await updateUserProfile(user);
                } else {
                    updateGuestProfile();
                }
            });
        }

        async function updateUserProfile(user) {
            const displayName = user.displayName || 'Пользователь';
            const email = user.email || 'Без email';
            const photoURL = user.photoURL;
            const isAnonymous = user.isAnonymous;
            const isEmailVerified = user.emailVerified;
            
            // Обновляем хедер
            document.getElementById('userName').textContent = isAnonymous ? 'Гость' : displayName;
            document.getElementById('userEmail').textContent = isAnonymous ? 'Гостевой режим' : (isEmailVerified ? '✓ ' : '') + email;
            
            const userAvatar = document.getElementById('userAvatar');
            if (photoURL) {
                userAvatar.innerHTML = `<img src="${photoURL}" alt="${displayName}" onerror="this.onerror=null; this.innerHTML='<i class=\"fas fa-user\"></i>';">`;
            } else {
                userAvatar.innerHTML = '<i class="fas fa-user"></i>';
            }
            
            // Обновляем меню пользователя
            updateUserMenu(user);
            
            // Загружаем дополнительные данные из Firestore
            await loadUserData(user.uid);
        }

        function updateGuestProfile() {
            document.getElementById('userName').textContent = 'Гость';
            document.getElementById('userEmail').textContent = 'Войти в аккаунт';
            document.getElementById('userAvatar').innerHTML = '<i class="fas fa-user"></i>';
            
            // Обновляем меню для гостя
            updateGuestMenu();
        }

        function updateUserMenu(user) {
            const displayName = user.displayName || 'Пользователь';
            const email = user.email || 'Без email';
            const isAnonymous = user.isAnonymous;
            const isEmailVerified = user.emailVerified;
            const photoURL = user.photoURL;
            
            const dropdownMenu = document.getElementById('dropdownMenu');
            
            dropdownMenu.innerHTML = `
                <div class="dropdown-header">
                    <div class="user-avatar">
                        ${photoURL ? 
                            `<img src="${photoURL}" alt="${displayName}" onerror="this.onerror=null; this.innerHTML='<i class=\"fas fa-user\"></i>';">` : 
                            '<i class="fas fa-user"></i>'
                        }
                    </div>
                    <div class="user-info">
                        <div class="user-name">${isAnonymous ? 'Гость' : displayName}</div>
                        <div class="user-email">${isAnonymous ? 'Гостевой режим' : (isEmailVerified ? '✓ ' : '') + email}</div>
                    </div>
                </div>
                
                <a href="https://kirill12633.github.io/Metro.New.Official/ru/account/settings" class="dropdown-item">
                    <i class="fas fa-user-cog"></i>
                    Мой аккаунт
                </a>
                
                <a href="https://kirill12633.github.io/Metro.New.Official/ru/account/" class="dropdown-item">
                    <i class="fas fa-bell"></i>
                    Уведомления
                </a>
                
                <a href="https://kirill12633.github.io/mail.metro.new/" class="dropdown-item">
                    <i class="fas fa-envelope"></i>
                    Почта
                </a>
                
                <a href="https://kirill12633.github.io/Metro.New.Official/ru/help" class="dropdown-item">
                    <i class="fas fa-file-contract"></i>
                    Правовые документы
                </a>
                
                <a href="https://kirill12633.github.io/support.metro.new/" class="dropdown-item">
                    <i class="fas fa-headset"></i>
                    Служба поддержки
                </a>
                
                <div class="dropdown-divider" style="height: 1px; background: var(--gray-light); margin: 0.5rem 0;"></div>
                
                ${isAnonymous ? `
                    <button class="dropdown-item" id="upgradeAccountBtn">
                        <i class="fas fa-user-plus"></i>
                        Создать аккаунт
                    </button>
                ` : ''}
                
                <button class="dropdown-item logout" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    ${isAnonymous ? 'Выйти из гостевого режима' : 'Выйти'}
                </button>
            `;
            
            // Добавляем обработчики
            setTimeout(() => {
                document.getElementById('logoutBtn')?.addEventListener('click', signOutUser);
                document.getElementById('upgradeAccountBtn')?.addEventListener('click', function() {
                    document.getElementById('userProfile').classList.remove('active');
                    document.getElementById('registerModal').classList.add('show');
                });
            }, 100);
        }

        function updateGuestMenu() {
            const dropdownMenu = document.getElementById('dropdownMenu');
            
            dropdownMenu.innerHTML = `
                <div class="dropdown-header">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name">Гость</div>
                        <div class="user-email">Не авторизован</div>
                    </div>
                </div>
                
                <button class="dropdown-item" id="loginMenuBtn">
                    <i class="fas fa-sign-in-alt"></i>
                    Вход
                </button>
                
                <button class="dropdown-item" id="registerMenuBtn">
                    <i class="fas fa-user-plus"></i>
                    Регистрация
                </button>
                
                <button class="dropdown-item" id="guestLoginBtnMenu">
                    <i class="fas fa-user-secret"></i>
                    Продолжить как гость
                </button>
                
                <div class="dropdown-divider" style="height: 1px; background: var(--gray-light); margin: 0.5rem 0;"></div>
                
                <a href="https://kirill12633.github.io/Metro.New.Official/ru/help" class="dropdown-item">
                    <i class="fas fa-file-contract"></i>
                    Правовые документы
                </a>
                
                <a href="https://kirill12633.github.io/support.metro.new/" class="dropdown-item">
                    <i class="fas fa-headset"></i>
                    Служба поддержки
                </a>
            `;
            
            // Добавляем обработчики для гостевого меню
            setTimeout(() => {
                document.getElementById('loginMenuBtn')?.addEventListener('click', function() {
                    document.getElementById('userProfile').classList.remove('active');
                    document.getElementById('loginModal').classList.add('show');
                });
                
                document.getElementById('registerMenuBtn')?.addEventListener('click', function() {
                    document.getElementById('userProfile').classList.remove('active');
                    document.getElementById('registerModal').classList.add('show');
                });
                
                document.getElementById('guestLoginBtnMenu')?.addEventListener('click', function() {
                    document.getElementById('userProfile').classList.remove('active');
                    signInAnonymously();
                });
            }, 100);
        }

        function initForms() {
            // Форма входа
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    await signInWithEmail();
                });
            }
            
            // Форма регистрации
            const registerForm = document.getElementById('registerForm');
            if (registerForm) {
                registerForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    await signUpWithEmail();
                });
            }
            
            // Кнопка показа регистрации
            document.getElementById('showRegisterBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('loginModal').classList.remove('show');
                document.getElementById('registerModal').classList.add('show');
            });
            
            // Кнопка показа входа
            document.getElementById('showLoginBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('registerModal').classList.remove('show');
                document.getElementById('loginModal').classList.add('show');
            });
            
            // Вход через Google
            document.getElementById('googleLoginBtn')?.addEventListener('click', async function() {
                await signInWithGoogle();
            });
            
            // Регистрация через Google
            document.getElementById('googleRegisterBtn')?.addEventListener('click', async function() {
                await signInWithGoogle();
            });
            
            // Гостевой вход
            document.getElementById('guestLoginBtn')?.addEventListener('click', async function() {
                await signInAnonymously();
            });
            
            // Забыли пароль - ссылка на страницу восстановления
            document.getElementById('forgotPasswordBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = "https://kirill12633.github.io/Metro.New.Official/ru/account/change-password";
            });
        }

        async function signInWithEmail() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const loginSubmitBtn = document.getElementById('loginSubmitBtn');
            const loginError = document.getElementById('loginError');
            
            try {
                if (!email || !password) {
                    throw new Error('Заполните все поля');
                }
                
                loginSubmitBtn.disabled = true;
                loginSubmitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Вход...';
                loginError.style.display = 'none';
                
                const { signInWithEmailAndPassword } = window.firebaseModules;
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                
                if (userCredential.user.emailVerified === false) {
                    showMessage('Подтвердите email для полного доступа', 'warning');
                } else {
                    showMessage(`Добро пожаловать, ${userCredential.user.displayName || 'пользователь'}!`, 'success');
                }
                
                document.getElementById('loginModal').classList.remove('show');
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                
            } catch (error) {
                console.error('Ошибка входа:', error);
                
                let errorMessage = 'Ошибка входа. ';
                switch (error.code) {
                    case 'auth/invalid-email':
                        errorMessage += 'Неверный формат email.';
                        break;
                    case 'auth/invalid-login-credentials':
                        errorMessage += 'Неверный email или пароль.';
                        break;
                    case 'auth/too-many-requests':
                        errorMessage += 'Слишком много попыток. Попробуйте позже.';
                        break;
                    default:
                        errorMessage += error.message;
                }
                
                loginError.textContent = errorMessage;
                loginError.style.display = 'block';
                
            } finally {
                loginSubmitBtn.disabled = false;
                loginSubmitBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Войти';
            }
        }

        async function signUpWithEmail() {
            const username = document.getElementById('registerUsername').value.trim();
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            const registerSubmitBtn = document.getElementById('registerSubmitBtn');
            const registerError = document.getElementById('registerError');
            
            try {
                if (!username || !email || !password || !confirmPassword) {
                    throw new Error('Заполните все поля');
                }
                
                if (username.length < 3) {
                    throw new Error('Имя пользователя должно быть не менее 3 символов');
                }
                
                if (!validateEmail(email)) {
                    throw new Error('Неверный формат email');
                }
                
                if (!agreeTerms) {
                    throw new Error('Необходимо согласиться с правилами');
                }
                
                if (password !== confirmPassword) {
                    throw new Error('Пароли не совпадают');
                }
                
                registerSubmitBtn.disabled = true;
                registerSubmitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Регистрация...';
                registerError.style.display = 'none';
                
                const { createUserWithEmailAndPassword, updateProfile, sendEmailVerification } = window.firebaseModules;
                
                // Регистрация
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                
                // Обновление профиля
                await updateProfile(userCredential.user, {
                    displayName: username
                });
                
                // Отправка email для подтверждения
                await sendEmailVerification(userCredential.user, {
                    url: window.location.origin,
                    handleCodeInApp: true
                });
                
                // Сохранение данных в Firestore
                await saveUserData(userCredential.user.uid, {
                    username: username,
                    email: email,
                    createdAt: new Date().toISOString(),
                    emailVerified: false
                });
                
                showMessage(`Аккаунт успешно создан! Проверьте почту ${email} для подтверждения.`, 'success');
                document.getElementById('registerModal').classList.remove('show');
                
                // Очищаем форму
                document.getElementById('registerUsername').value = '';
                document.getElementById('registerEmail').value = '';
                document.getElementById('registerPassword').value = '';
                document.getElementById('registerConfirmPassword').value = '';
                document.getElementById('agreeTerms').checked = false;
                
            } catch (error) {
                console.error('Ошибка регистрации:', error);
                
                let errorMessage = 'Ошибка регистрации. ';
                switch (error.code) {
                    case 'auth/email-already-in-use':
                        errorMessage += 'Email уже используется.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage += 'Неверный формат email.';
                        break;
                    case 'auth/weak-password':
                        errorMessage += 'Пароль слишком слабый. Минимум 8 символов.';
                        break;
                    default:
                        errorMessage += error.message;
                }
                
                registerError.textContent = errorMessage;
                registerError.style.display = 'block';
                
            } finally {
                registerSubmitBtn.disabled = false;
                registerSubmitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Зарегистрироваться';
            }
        }

        async function signInWithGoogle() {
            try {
                const { signInWithPopup } = window.firebaseModules;
                const userCredential = await signInWithPopup(auth, window.googleProvider);
                
                // Проверяем, новый ли пользователь
                const isNewUser = userCredential._tokenResponse?.isNewUser;
                
                if (isNewUser) {
                    // Сохраняем данные нового пользователя
                    await saveUserData(userCredential.user.uid, {
                        username: userCredential.user.displayName,
                        email: userCredential.user.email,
                        createdAt: new Date().toISOString(),
                        emailVerified: userCredential.user.emailVerified
                    });
                    showMessage('Аккаунт успешно создан через Google!', 'success');
                } else {
                    showMessage(`Добро пожаловать, ${userCredential.user.displayName || 'пользователь'}!`, 'success');
                }
                
                document.getElementById('loginModal').classList.remove('show');
                document.getElementById('registerModal').classList.remove('show');
                
            } catch (error) {
                console.error('Ошибка входа через Google:', error);
                
                let errorMessage = 'Ошибка входа через Google. ';
                switch (error.code) {
                    case 'auth/popup-closed-by-user':
                        errorMessage = 'Вход отменен пользователем';
                        break;
                    case 'auth/popup-blocked':
                        errorMessage = 'Всплывающее окно заблокировано. Разрешите всплывающие окна.';
                        break;
                    default:
                        errorMessage += error.message;
                }
                
                showMessage(errorMessage, 'error');
            }
        }

        async function signInAnonymously() {
            try {
                const { signInAnonymously } = window.firebaseModules;
                await signInAnonymously(auth);
                
                showMessage('Вход в гостевом режиме', 'info');
                document.getElementById('loginModal').classList.remove('show');
                
            } catch (error) {
                console.error('Ошибка гостевого входа:', error);
                showMessage('Ошибка гостевого входа', 'error');
            }
        }

        async function signOutUser() {
            try {
                const { signOut } = window.firebaseModules;
                await signOut(auth);
                
                showMessage('Вы вышли из аккаунта', 'info');
                document.getElementById('userProfile').classList.remove('active');
                
            } catch (error) {
                console.error('Ошибка выхода:', error);
                showMessage('Ошибка выхода', 'error');
            }
        }

        async function saveUserData(uid, data) {
            try {
                const { doc, setDoc } = window.firebaseModules;
                await setDoc(doc(db, 'users', uid), data, { merge: true });
                console.log('Данные пользователя сохранены в Firestore:', uid);
                return true;
            } catch (error) {
                console.error('Ошибка сохранения данных в Firestore:', error);
                return false;
            }
        }

        async function loadUserData(uid) {
            try {
                const { doc, getDoc } = window.firebaseModules;
                const docRef = doc(db, 'users', uid);
                const docSnap = await getDoc(docRef);
                
                if (docSnap.exists()) {
                    console.log('Данные пользователя загружены:', docSnap.data());
                    return docSnap.data();
                } else {
                    console.log('Документ пользователя не найден');
                    return null;
                }
            } catch (error) {
                console.error('Ошибка загрузки данных:', error);
                return null;
            }
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function showMessage(message, type = 'info') {
            console.log(`${type}: ${message}`);
            
            const messageEl = document.createElement('div');
            messageEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'error' ? '#DC3545' : type === 'success' ? '#28A745' : type === 'warning' ? '#FFC107' : '#0066CC'};
                color: ${type === 'warning' ? '#1A1A1A' : 'white'};
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 8px 25px rgba(0,0,0,0.2);
                z-index: 3000;
                animation: slideIn 0.3s ease;
                max-width: 300px;
                font-weight: 500;
                display: flex;
                align-items: center;
                gap: 0.75rem;
            `;
            
            const icon = type === 'error' ? 'fas fa-exclamation-circle' :
                        type === 'success' ? 'fas fa-check-circle' :
                        type === 'warning' ? 'fas fa-exclamation-triangle' :
                        'fas fa-info-circle';
            
            messageEl.innerHTML = `
                <i class="${icon}"></i>
                <span>${message}</span>
            `;
            
            // Добавляем стили анимации
            const styleId = 'message-animation-styles';
            if (!document.getElementById(styleId)) {
                const style = document.createElement('style');
                style.id = styleId;
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(messageEl);
            
            setTimeout(() => {
                messageEl.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    if (messageEl.parentNode) {
                        messageEl.parentNode.removeChild(messageEl);
                    }
                }, 300);
            }, 3000);
        }

        // Экспортируем функции для отладки
        window.firebaseApp = {
            auth: window.auth,
            db: window.db,
            storage: window.storage,
            signInWithGoogle: signInWithGoogle,
            signOut: signOutUser,
            showMessage: showMessage
        };
    </script>
</body>
</html>
