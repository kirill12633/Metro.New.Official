<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ—Ç—Ä–æ New - –ú–æ—Å–∫–æ–≤—Å–∫–∏–π –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω –≤ Roblox</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDKs (Classic/Compat –≤–µ—Ä—Å–∏—è) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-check-compat.js"></script>
    
    <style>
        :root {
            --primary: #0066CC;
            --primary-dark: #0052a3;
            --primary-light: #4d94ff;
            --secondary: #FFD700;
            --secondary-dark: #e6c200;
            --dark: #1A1A1A;
            --light: #F8F9FA;
            --gray: #6C757D;
            --gray-light: #e9ecef;
            --success: #28A745;
            --warning: #FFC107;
            --danger: #DC3545;
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 25px rgba(0,0,0,0.2);
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 15px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: var(--light);
            color: var(--dark);
        }
        
        main {
            flex: 1;
        }
    </style>
</head>
<body>
    <!-- –•–ï–î–ï–† -->
    <header class="main-header">
        <div class="header-container">
            <div class="header-left">
                <a href="/" class="logo">
                    <span class="logo-icon">M</span>
                    <span>–ú–µ—Ç—Ä–æ New</span>
                </a>
            </div>
            
            <div class="header-center">
                <nav class="breadcrumbs">
                    <div class="breadcrumb-item">
                        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
                        <span class="breadcrumb-separator">‚Ä∫</span>
                    </div>
                    <div class="breadcrumb-item">
                        <a href="/games">–ò–≥—Ä—ã</a>
                        <span class="breadcrumb-separator">‚Ä∫</span>
                    </div>
                    <div class="breadcrumb-item">
                        <span class="breadcrumb-current">–ú–µ—Ç—Ä–æ New</span>
                    </div>
                </nav>
            </div>
            
            <div class="header-right">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫..." disabled>
                </div>
                
                <div class="dropdown user-profile" id="userDropdown">
                    <div class="user-avatar" id="userAvatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <div class="user-status" id="userStatus">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                    
                    <div class="dropdown-menu" id="userMenu">
                        <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ Firebase -->
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
    <main class="container">
        <section class="hero">
            <h1>–ú–µ—Ç—Ä–æ New - –ú–æ—Å–∫–æ–≤—Å–∫–∏–π –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω –≤ Roblox</h1>
            <p>–ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ —É–Ω–∏–∫–∞–ª—å–Ω—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –º–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –º–µ—Ç—Ä–æ, –≤–æ—Å—Å–æ–∑–¥–∞–Ω–Ω—É—é —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤ Roblox. –ò—Å—Å–ª–µ–¥—É–π—Ç–µ —Å—Ç–∞–Ω—Ü–∏–∏, —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–æ–µ–∑–¥–∞–º–∏ –∏ —Å—Ç–∞–Ω–æ–≤–∏—Å—å —á–∞—Å—Ç—å—é –Ω–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞!</p>
            <div class="hero-buttons">
                <a href="https://www.roblox.com/communities/34820737/RP-NEW" class="btn btn-primary" target="_blank">
                    <i class="fas fa-play"></i>
                    –ò–≥—Ä–∞—Ç—å —Å–µ–π—á–∞—Å
                </a>
                <a href="#" class="btn btn-outline" id="aboutBtn">
                    <i class="fas fa-info-circle"></i>
                    –£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ
                </a>
            </div>
        </section>
        
        <div class="content-grid">
            <div class="content-card">
                <h3><i class="fas fa-gamepad"></i> –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã</h3>
                <ul class="feature-list">
                    <li><i class="fas fa-subway"></i> –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –ø–æ–µ–∑–¥–∞ –º–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –º–µ—Ç—Ä–æ</li>
                    <li><i class="fas fa-map-marked-alt"></i> –¢–æ—á–Ω—ã–µ –∫–æ–ø–∏–∏ —Å—Ç–∞–Ω—Ü–∏–π</li>
                    <li><i class="fas fa-users"></i> –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º</li>
                    <li><i class="fas fa-train"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–µ–∑–¥–∞–º–∏</li>
                </ul>
            </div>
            
            <div class="content-card">
                <h3><i class="fas fa-chart-line"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">15K+</div>
                        <div class="stat-label">–ò–≥—Ä–æ–∫–æ–≤</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">247</div>
                        <div class="stat-label">–û–Ω–ª–∞–π–Ω —Å–µ–π—á–∞—Å</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">1.2M+</div>
                        <div class="stat-label">–ö–º –ø—Ä–æ–π–¥–µ–Ω–æ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">3</div>
                        <div class="stat-label">–õ–∏–Ω–∏–∏ –º–µ—Ç—Ä–æ</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="content-card metro-lines">
            <h2><i class="fas fa-subway"></i> –õ–∏–Ω–∏–∏ –º–µ—Ç—Ä–æ –≤ –∏–≥—Ä–µ</h2>
            <div class="lines-grid">
                <div class="line-card">
                    <div class="line-color" style="background-color: #FF0000;"></div>
                    <div class="line-name">–°–æ–∫–æ–ª—å–Ω–∏—á–µ—Å–∫–∞—è</div>
                    <div class="line-stations">3 —Å—Ç–∞–Ω—Ü–∏–∏</div>
                </div>
                <div class="line-card">
                    <div class="line-color" style="background-color: #008000;"></div>
                    <div class="line-name">–ó–∞–º–æ—Å–∫–≤–æ—Ä–µ—Ü–∫–∞—è</div>
                    <div class="line-stations">–°–∫–æ—Ä–æ</div>
                </div>
                <div class="line-card">
                    <div class="line-color" style="background-color: #0000FF;"></div>
                    <div class="line-name">–ê—Ä–±–∞—Ç—Å–∫–æ-–ü–æ–∫—Ä–æ–≤—Å–∫–∞—è</div>
                    <div class="line-stations">–°–∫–æ—Ä–æ</div>
                </div>
            </div>
        </div>
    </main>

    <!-- –§–£–¢–ï–† -->
    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h4><i class="fas fa-info-circle"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                    <ul>
                        <li><a href="#">–û –ø—Ä–æ–µ–∫—Ç–µ</a></li>
                        <li><a href="#">–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞</a></li>
                        <li><a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                        <li><a href="#">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4><i class="fas fa-file-contract"></i> –î–æ–∫—É–º–µ–Ω—Ç—ã</h4>
                    <ul>
                        <li><a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></li>
                        <li><a href="#">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</a></li>
                        <li><a href="#">–ü—Ä–∞–≤–∏–ª–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</a></li>
                        <li><a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4><i class="fas fa-headset"></i> –ü–æ–¥–¥–µ—Ä–∂–∫–∞</h4>
                    <ul>
                        <li><a href="#">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</a></li>
                        <li><a href="#">–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤</a></li>
                        <li><a href="#">–°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ</a></li>
                        <li><a href="#">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–¥–µ—é</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4><i class="fas fa-share-alt"></i> –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</h4>
                    <div class="social-links">
                        <a href="https://discord.com/invite/WjGZBs3HMX" class="social-link" target="_blank">
                            <i class="fab fa-discord"></i>
                            <span>Discord</span>
                        </a>
                        <a href="https://t.me/metronewroblox" class="social-link" target="_blank">
                            <i class="fab fa-telegram"></i>
                            <span>Telegram</span>
                        </a>
                        <a href="https://www.youtube.com/@Metro-RP-NEW-Roblox" class="social-link" target="_blank">
                            <i class="fab fa-youtube"></i>
                            <span>YouTube</span>
                        </a>
                        <a href="https://www.roblox.com/communities/34820737/RP-NEW" class="social-link" target="_blank">
                            <i class="fab fa-roblox"></i>
                            <span>Roblox</span>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="copyright">
                    <p>&copy; <span id="currentYear"></span> –ú–µ—Ç—Ä–æ New. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ê–ö–ö–ê–£–ù–¢–ê -->
    <div class="modal" id="accountModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-circle"></i> –ú–æ–π –∞–∫–∫–∞—É–Ω—Ç</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="account-header">
                    <div class="account-avatar" id="accountAvatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="account-info">
                        <h4 id="accountName">–ó–∞–≥—Ä—É–∑–∫–∞...</h4>
                        <p id="accountEmail">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                        <span class="account-badge" id="accountBadge">–ì–æ—Å—Ç—å</span>
                    </div>
                </div>
                
                <div class="account-tabs">
                    <button class="account-tab active" data-tab="profile">
                        <i class="fas fa-user"></i>
                        <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
                    </button>
                    <button class="account-tab" data-tab="settings">
                        <i class="fas fa-cog"></i>
                        <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                    </button>
                    <button class="account-tab" data-tab="notifications">
                        <i class="fas fa-bell"></i>
                        <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                        <span class="tab-badge" id="notifBadge">0</span>
                    </button>
                </div>
                
                <div class="account-tab-content active" id="profileTab">
                    <div class="account-section">
                        <h5><i class="fas fa-sign-in-alt"></i> –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h5>
                        <div class="auth-buttons">
                            <button class="btn btn-primary" id="loginBtn">
                                <i class="fas fa-sign-in-alt"></i>
                                –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç
                            </button>
                            <button class="btn btn-outline" id="registerBtn">
                                <i class="fas fa-user-plus"></i>
                                –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                            </button>
                        </div>
                        <p class="account-note" id="authNote"></p>
                    </div>
                    
                    <div class="account-section">
                        <h5><i class="fas fa-user"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è</h5>
                        <div class="profile-info">
                            <div class="info-item">
                                <span class="info-label">–°—Ç–∞—Ç—É—Å:</span>
                                <span class="info-value" id="profileStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</span>
                                <span class="info-value" id="profileRegDate">‚Äî</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥:</span>
                                <span class="info-value" id="profileLastLogin">‚Äî</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">UID:</span>
                                <span class="info-value" id="profileUID">‚Äî</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="account-section" id="profileActionsSection" style="display: none;">
                        <h5><i class="fas fa-user-edit"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º</h5>
                        <div class="profile-actions">
                            <button class="btn btn-small" id="changeAvatarBtn">
                                <i class="fas fa-camera"></i>
                                –°–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä
                            </button>
                            <button class="btn btn-small btn-outline" id="changePasswordBtn">
                                <i class="fas fa-key"></i>
                                –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="account-tab-content" id="settingsTab">
                    <div class="account-section">
                        <h5><i class="fas fa-palette"></i> –í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h5>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</span>
                                <span class="setting-desc">–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–µ—Ç–ª—É—é –∏–ª–∏ —Ç—ë–º–Ω—É—é —Ç–µ–º—É</span>
                            </div>
                            <div class="setting-control">
                                <div class="theme-toggle" id="themeToggle">
                                    <button class="theme-option active" data-theme="light">
                                        <i class="fas fa-sun"></i>
                                        <span>–°–≤–µ—Ç–ª–∞—è</span>
                                    </button>
                                    <button class="theme-option" data-theme="dark">
                                        <i class="fas fa-moon"></i>
                                        <span>–¢—ë–º–Ω–∞—è</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</span>
                                <span class="setting-desc">–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ —Å–∞–π—Ç–∞</span>
                            </div>
                            <div class="setting-control">
                                <div class="lang-selector" id="langSelector">
                                    <button class="lang-option active" data-lang="ru">
                                        <span class="lang-flag ru"></span>
                                        <span>–†—É—Å—Å–∫–∏–π</span>
                                    </button>
                                    <button class="lang-option" data-lang="en">
                                        <span class="lang-flag en"></span>
                                        <span>English</span>
                                    </button>
                                    <button class="lang-option" data-lang="es">
                                        <span class="flag-icon">üá™üá∏</span>
                                        <span>Espa√±ol</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="account-section">
                        <h5><i class="fas fa-envelope"></i> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø–æ—á—Ç–∞</h5>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                                <span class="setting-desc">–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –ø–æ—á—Ç—É</span>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="emailNotifications" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">–ù–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞</span>
                                <span class="setting-desc">–ü–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö</span>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="projectNews" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="account-tab-content" id="notificationsTab">
                    <div class="account-section">
                        <h5><i class="fas fa-bell"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h5>
                        <div class="notifications-list" id="notificationsList">
                            <div class="notification-empty">
                                <i class="fas fa-spinner fa-spin"></i>
                                <p>–ó–∞–≥—Ä—É–∑–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π...</p>
                            </div>
                        </div>
                        
                        <div class="notifications-actions" id="notificationsActions" style="display: none;">
                            <button class="btn btn-small" id="markAllReadBtn">
                                <i class="fas fa-check-double"></i>
                                –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å—ë –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
                            </button>
                            <button class="btn btn-small btn-outline" id="clearNotificationsBtn">
                                <i class="fas fa-trash"></i>
                                –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-sign-in-alt"></i> –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="auth-tabs">
                    <button class="auth-tab active" data-tab="login">–í—Ö–æ–¥</button>
                    <button class="auth-tab" data-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>
                
                <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
                <form id="loginForm" class="auth-form active">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmail" placeholder="example@mail.ru" required>
                    </div>
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                        <div class="password-requirements">
                            <small>–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤: –∑–∞–≥–ª–∞–≤–Ω—ã–µ, —Å—Ç—Ä–æ—á–Ω—ã–µ, —Ü–∏—Ñ—Ä—ã, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã</small>
                        </div>
                    </div>
                    <div class="form-options">
                        <label class="checkbox">
                            <input type="checkbox" id="rememberMe" checked>
                            <span>–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</span>
                        </label>
                        <a href="#" class="forgot-password" id="forgotPasswordBtn">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
                    </div>
                    <button type="submit" class="btn btn-primary" id="loginSubmitBtn">
                        <i class="fas fa-sign-in-alt"></i>
                        –í–æ–π—Ç–∏
                    </button>
                    <div class="auth-error" id="loginError" style="display: none;"></div>
                </form>
                
                <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <form id="registerForm" class="auth-form">
                    <div class="form-group">
                        <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <input type="text" id="registerUsername" placeholder="MetroDriver" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="registerEmail" placeholder="example@mail.ru" required>
                    </div>
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="registerPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                        <div class="password-strength" id="passwordStrength">
                            <div class="strength-bar"></div>
                            <div class="strength-text">–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: <span id="strengthText">—Å–ª–∞–±—ã–π</span></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" id="registerConfirmPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                        <div class="password-match" id="passwordMatch" style="display: none;">
                            <small style="color: var(--success);">‚úì –ü–∞—Ä–æ–ª–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç</small>
                        </div>
                    </div>
                    <div class="form-options">
                        <label class="checkbox">
                            <input type="checkbox" id="agreeTerms" required>
                            <span>–Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å <a href="#" style="color: var(--primary);">–ø—Ä–∞–≤–∏–ª–∞–º–∏</a> –∏ <a href="#" style="color: var(--primary);">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></span>
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary" id="registerSubmitBtn">
                        <i class="fas fa-user-plus"></i>
                        –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                    </button>
                    <div class="auth-error" id="registerError" style="display: none;"></div>
                </form>
                
                <div class="auth-divider">
                    <span>–∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑</span>
                </div>
                
                <div class="social-auth">
                    <button class="btn-social google" id="googleLoginBtn">
                        <i class="fab fa-google"></i>
                        Google
                    </button>
                    <button class="btn-social anonymous" id="anonymousLoginBtn">
                        <i class="fas fa-user-secret"></i>
                        –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫–∞–∫ –≥–æ—Å—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø –ü–ê–†–û–õ–Ø -->
    <div class="modal" id="passwordResetModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-key"></i> –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email</label>
                    <input type="email" id="resetEmail" placeholder="example@mail.ru" required>
                    <small>–ù–∞ —ç—Ç–æ—Ç email –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è</small>
                </div>
                <button class="btn btn-primary" id="sendResetBtn">
                    <i class="fas fa-paper-plane"></i>
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É
                </button>
                <div class="reset-message" id="resetMessage" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: var(--radius-md);"></div>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –°–ú–ï–ù–´ –ü–ê–†–û–õ–Ø -->
    <div class="modal" id="changePasswordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-key"></i> –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                    <input type="password" id="currentPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å" required>
                </div>
                <div class="form-group">
                    <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                    <input type="password" id="newPassword" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" required>
                    <div class="password-strength">
                        <div class="strength-bar"></div>
                        <div class="strength-text">–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è: <span>—Å–ª–∞–±—ã–π</span></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                    <input type="password" id="confirmNewPassword" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                </div>
                <button class="btn btn-primary" id="changePasswordSubmitBtn">
                    <i class="fas fa-save"></i>
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
                </button>
                <div class="password-change-message" id="passwordChangeMessage" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ó–ê–ì–†–£–ó–ö–ò –ê–í–ê–¢–ê–†–ê -->
    <div class="modal" id="avatarModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-camera"></i> –°–º–µ–Ω–∞ –∞–≤–∞—Ç–∞—Ä–∞</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="avatar-upload">
                    <div class="avatar-preview" id="avatarPreview">
                        <img src="" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä" id="avatarPreviewImg" style="display: none;">
                        <i class="fas fa-user" id="avatarPreviewIcon"></i>
                    </div>
                    <input type="file" id="avatarFileInput" accept="image/*" style="display: none;">
                    <button class="btn btn-outline" id="chooseAvatarBtn">
                        <i class="fas fa-folder-open"></i>
                        –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
                    </button>
                    <small style="display: block; margin-top: 0.5rem; color: var(--gray);">
                        –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 2MB. –§–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF
                    </small>
                </div>
                <div class="avatar-actions" style="margin-top: 2rem;">
                    <button class="btn btn-primary" id="uploadAvatarBtn" disabled>
                        <i class="fas fa-upload"></i>
                        –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä
                    </button>
                    <button class="btn btn-outline" id="removeAvatarBtn" style="display: none;">
                        <i class="fas fa-trash"></i>
                        –£–¥–∞–ª–∏—Ç—å –∞–≤–∞—Ç–∞—Ä
                    </button>
                </div>
                <div class="avatar-message" id="avatarMessage" style="display: none; margin-top: 1rem;"></div>
            </div>
        </div>
    </div>

    <!-- –¢–£–¢ –ë–£–î–ï–¢ CSS (—Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∫–æ–¥–∞) -->
    <!-- –ü–æ–ª–Ω—ã–π CSS —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –¥–ª—è –æ—Ç–≤–µ—Ç–∞, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –≤–∑—è—Ç—å –µ–≥–æ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è -->
    <style id="dynamic-css">
        /* –í–°–¢–ê–í–¨–¢–ï –°–Æ–î–ê –ü–û–õ–ù–´–ô CSS –ò–ó –ü–†–ï–î–´–î–£–©–ï–ì–û –ö–û–î–ê */
        /* .main-header, .header-container, .logo, –∏ —Ç.–¥. */
    </style>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Firebase —Å –≤–∞—à–∏–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
        // –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å–≤–æ–∏ –∏–∑ Firebase Console
        const firebaseConfig = {
            apiKey: "AIzaSyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
            authDomain: "your-project.firebaseapp.com",
            projectId: "your-project",
            storageBucket: "your-project.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdef1234567890",
            measurementId: "G-ABCDEF1234"
        };

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Firebase
        let firebaseApp, auth, db, storage, appCheck;

        document.addEventListener('DOMContentLoaded', async function() {
            try {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –≥–æ–¥
                document.getElementById('currentYear').textContent = new Date().getFullYear();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                document.getElementById('userName').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
                document.getElementById('userStatus').textContent = '–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Firebase...';
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
                await initializeFirebase();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                initUI();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
                checkAuthState();
                
                console.log('Firebase —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
                document.getElementById('userName').textContent = '–û—à–∏–±–∫–∞';
                document.getElementById('userStatus').textContent = '–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É';
                showMessage('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.', 'error');
            }
        });

        async function initializeFirebase() {
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ Firebase –∑–∞–≥—Ä—É–∂–µ–Ω
                if (typeof firebase === 'undefined') {
                    throw new Error('Firebase SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');
                }
                
                console.log('Firebase –≤–µ—Ä—Å–∏—è:', firebase.SDK_VERSION);
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Firebase
                firebaseApp = firebase.initializeApp(firebaseConfig);
                auth = firebase.auth();
                db = firebase.firestore();
                storage = firebase.storage();
                
                // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º App Check (—Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
                try {
                    appCheck = firebase.appCheck();
                    // –í–∫–ª—é—á–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º –∫–ª—é—á–æ–º reCAPTCHA v3
                    // await appCheck.activate('YOUR_RECAPTCHA_SITE_KEY');
                    
                    // –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
                    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                        self.FIREBASE_APPCHECK_DEBUG_TOKEN = true;
                    }
                } catch (appCheckError) {
                    console.warn('App Check –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω:', appCheckError);
                }
                
                return firebaseApp;
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Firebase:', error);
                throw error;
            }
        }

        function initUI() {
            // –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è UI –±–µ–∑ —Å–ª–æ–∂–Ω–æ–≥–æ CSS
            setupBasicStyles();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–ø–∞–¥–∞—é—â–∏—Ö –º–µ–Ω—é
            initDropdowns();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            initModals();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
            initEventHandlers();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            loadSavedSettings();
        }

        function setupBasicStyles() {
            // –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const style = document.createElement('style');
            style.textContent = `
                /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ö–µ–¥–µ—Ä–∞ */
                .main-header {
                    background: white;
                    padding: 1rem;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    z-index: 1000;
                }
                
                .header-container {
                    max-width: 1200px;
                    margin: 0 auto;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }
                
                .logo {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    text-decoration: none;
                    color: var(--dark);
                    font-weight: bold;
                    font-size: 1.2rem;
                }
                
                .logo-icon {
                    width: 35px;
                    height: 35px;
                    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-weight: bold;
                }
                
                .user-profile {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    cursor: pointer;
                    padding: 5px 10px;
                    border-radius: 20px;
                    transition: background 0.3s;
                }
                
                .user-profile:hover {
                    background: rgba(0,0,0,0.05);
                }
                
                .user-avatar {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    background: #6c757d;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-size: 1.2rem;
                }
                
                .user-info {
                    display: flex;
                    flex-direction: column;
                }
                
                .user-name {
                    font-weight: 600;
                    font-size: 0.9rem;
                }
                
                .user-status {
                    font-size: 0.8rem;
                    color: #666;
                }
                
                /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
                .modal {
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 2000;
                }
                
                .modal-content {
                    background: white;
                    border-radius: 10px;
                    max-width: 500px;
                    width: 90%;
                    max-height: 90vh;
                    overflow-y: auto;
                }
                
                .modal-header {
                    padding: 20px;
                    border-bottom: 1px solid #eee;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }
                
                .modal-close {
                    background: none;
                    border: none;
                    font-size: 24px;
                    cursor: pointer;
                    color: #666;
                }
                
                .modal-body {
                    padding: 20px;
                }
                
                /* –§–æ—Ä–º—ã */
                .form-group {
                    margin-bottom: 15px;
                }
                
                .form-group label {
                    display: block;
                    margin-bottom: 5px;
                    font-weight: 500;
                }
                
                .form-group input {
                    width: 100%;
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                    font-size: 16px;
                }
                
                .btn {
                    padding: 10px 20px;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    font-weight: 600;
                    display: inline-flex;
                    align-items: center;
                    gap: 8px;
                }
                
                .btn-primary {
                    background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
                    color: var(--dark);
                }
                
                .btn-outline {
                    background: transparent;
                    border: 2px solid var(--secondary);
                    color: var(--secondary);
                }
                
                /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
                main {
                    margin-top: 80px;
                    padding: 20px;
                }
                
                .hero {
                    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
                    color: white;
                    padding: 40px 20px;
                    border-radius: 10px;
                    text-align: center;
                    margin-bottom: 30px;
                }
                
                .content-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                    gap: 20px;
                    margin-bottom: 30px;
                }
                
                .content-card {
                    background: white;
                    padding: 20px;
                    border-radius: 10px;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }
                
                /* –§—É—Ç–µ—Ä */
                footer {
                    background: var(--dark);
                    color: white;
                    padding: 30px 20px;
                    margin-top: 50px;
                }
                
                .footer-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 30px;
                    max-width: 1200px;
                    margin: 0 auto;
                }
                
                .social-links {
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                }
                
                .social-link {
                    color: rgba(255,255,255,0.8);
                    text-decoration: none;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    transition: color 0.3s;
                }
                
                .social-link:hover {
                    color: var(--secondary);
                }
            `;
            document.head.appendChild(style);
        }

        function initDropdowns() {
            const userDropdown = document.getElementById('userDropdown');
            
            if (userDropdown) {
                userDropdown.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const menu = this.querySelector('.dropdown-menu');
                    if (menu) {
                        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
                    }
                });
                
                document.addEventListener('click', function() {
                    const menu = document.querySelector('.dropdown-menu');
                    if (menu) {
                        menu.style.display = 'none';
                    }
                });
            }
        }

        function initModals() {
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫
            document.querySelectorAll('.modal-close').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('.modal').style.display = 'none';
                });
            });
            
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.style.display = 'none';
                    }
                });
            });
            
            // –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª–æ–∫
            document.addEventListener('click', function(e) {
                if (e.target.closest('#aboutBtn')) {
                    e.preventDefault();
                    showMessage('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞!');
                }
                
                if (e.target.closest('#loginBtn')) {
                    document.getElementById('authModal').style.display = 'flex';
                }
                
                if (e.target.closest('#registerBtn')) {
                    document.getElementById('authModal').style.display = 'flex';
                    document.querySelector('[data-tab="register"]').click();
                }
            });
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    
                    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    document.querySelectorAll('.auth-form').forEach(form => {
                        form.classList.remove('active');
                        if (form.id === `${tabName}Form`) {
                            form.classList.add('active');
                        }
                    });
                });
            });
        }

        function initEventHandlers() {
            // –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    const email = document.getElementById('loginEmail').value;
                    const password = document.getElementById('loginPassword').value;
                    
                    try {
                        await auth.signInWithEmailAndPassword(email, password);
                        document.getElementById('authModal').style.display = 'none';
                        showMessage('–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥!');
                    } catch (error) {
                        showMessage('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message, 'error');
                    }
                });
            }
            
            // –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            const registerForm = document.getElementById('registerForm');
            if (registerForm) {
                registerForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    const email = document.getElementById('registerEmail').value;
                    const password = document.getElementById('registerPassword').value;
                    const username = document.getElementById('registerUsername').value;
                    
                    try {
                        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                        await userCredential.user.updateProfile({
                            displayName: username
                        });
                        
                        document.getElementById('authModal').style.display = 'none';
                        showMessage('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!');
                    } catch (error) {
                        showMessage('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ' + error.message, 'error');
                    }
                });
            }
            
            // –ì–æ—Å—Ç–µ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
            const anonymousBtn = document.getElementById('anonymousLoginBtn');
            if (anonymousBtn) {
                anonymousBtn.addEventListener('click', async function() {
                    try {
                        await auth.signInAnonymously();
                        document.getElementById('authModal').style.display = 'none';
                        showMessage('–í—ã –≤–æ—à–ª–∏ –∫–∞–∫ –≥–æ—Å—Ç—å');
                    } catch (error) {
                        showMessage('–û—à–∏–±–∫–∞: ' + error.message, 'error');
                    }
                });
            }
            
            // Google –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
            const googleBtn = document.getElementById('googleLoginBtn');
            if (googleBtn) {
                googleBtn.addEventListener('click', async function() {
                    try {
                        const provider = new firebase.auth.GoogleAuthProvider();
                        await auth.signInWithPopup(provider);
                        document.getElementById('authModal').style.display = 'none';
                        showMessage('–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Google!');
                    } catch (error) {
                        showMessage('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Google: ' + error.message, 'error');
                    }
                });
            }
            
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
            const forgotPasswordBtn = document.getElementById('forgotPasswordBtn');
            if (forgotPasswordBtn) {
                forgotPasswordBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.getElementById('authModal').style.display = 'none';
                    setTimeout(() => {
                        document.getElementById('passwordResetModal').style.display = 'flex';
                    }, 300);
                });
            }
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
            const sendResetBtn = document.getElementById('sendResetBtn');
            if (sendResetBtn) {
                sendResetBtn.addEventListener('click', async function() {
                    const email = document.getElementById('resetEmail').value;
                    
                    if (!email) {
                        showMessage('–í–≤–µ–¥–∏—Ç–µ email', 'error');
                        return;
                    }
                    
                    try {
                        await auth.sendPasswordResetEmail(email);
                        showMessage('–°—Å—ã–ª–∫–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ ' + email);
                        document.getElementById('passwordResetModal').style.display = 'none';
                    } catch (error) {
                        showMessage('–û—à–∏–±–∫–∞: ' + error.message, 'error');
                    }
                });
            }
        }

        function loadSavedSettings() {
            // –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–º—ã
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.body.style.backgroundColor = '#121212';
                document.body.style.color = '#ffffff';
            }
        }

        function checkAuthState() {
            auth.onAuthStateChanged((user) => {
                if (user) {
                    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                    updateUserProfile(user);
                } else {
                    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                    updateGuestProfile();
                }
            });
        }

        function updateUserProfile(user) {
            const displayName = user.displayName || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            const email = user.email || '–ë–µ–∑ email';
            const isAnonymous = user.isAnonymous;
            
            document.getElementById('userName').textContent = isAnonymous ? '–ì–æ—Å—Ç—å' : displayName;
            document.getElementById('userStatus').textContent = isAnonymous ? '–ì–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º' : email;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ–Ω—é
            updateUserMenu(user);
        }

        function updateGuestProfile() {
            document.getElementById('userName').textContent = '–ì–æ—Å—Ç—å';
            document.getElementById('userStatus').textContent = '–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ–Ω—é –¥–ª—è –≥–æ—Å—Ç—è
            updateGuestMenu();
        }

        function updateUserMenu(user) {
            const userMenu = document.getElementById('userMenu');
            if (!userMenu) return;
            
            const isAnonymous = user.isAnonymous;
            
            userMenu.innerHTML = `
                <div style="padding: 10px; border-bottom: 1px solid #eee;">
                    <div style="font-weight: bold;">${isAnonymous ? '–ì–æ—Å—Ç—å' : user.displayName || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}</div>
                    <div style="font-size: 12px; color: #666;">${isAnonymous ? '–ì–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º' : user.email || '–ë–µ–∑ email'}</div>
                </div>
                <button class="dropdown-item" id="openAccountBtn" style="width: 100%; text-align: left; padding: 10px; border: none; background: none; cursor: pointer;">
                    <i class="fas fa-user-circle"></i> –ú–æ–π –∞–∫–∫–∞—É–Ω—Ç
                </button>
                <button class="dropdown-item logout" id="logoutBtn" style="width: 100%; text-align: left; padding: 10px; border: none; background: none; cursor: pointer; color: #dc3545;">
                    <i class="fas fa-sign-out-alt"></i> ${isAnonymous ? '–í—ã–π—Ç–∏ –∏–∑ –≥–æ—Å—Ç–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞' : '–í—ã–π—Ç–∏'}
                </button>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            setTimeout(() => {
                const logoutBtn = document.getElementById('logoutBtn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', async function() {
                        try {
                            await auth.signOut();
                            showMessage('–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞');
                        } catch (error) {
                            showMessage('–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞: ' + error.message, 'error');
                        }
                    });
                }
                
                const openAccountBtn = document.getElementById('openAccountBtn');
                if (openAccountBtn) {
                    openAccountBtn.addEventListener('click', function() {
                        document.getElementById('accountModal').style.display = 'flex';
                    });
                }
            }, 100);
        }

        function updateGuestMenu() {
            const userMenu = document.getElementById('userMenu');
            if (!userMenu) return;
            
            userMenu.innerHTML = `
                <div style="padding: 10px; border-bottom: 1px solid #eee;">
                    <div style="font-weight: bold;">–ì–æ—Å—Ç—å</div>
                    <div style="font-size: 12px; color: #666;">–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω</div>
                </div>
                <button class="dropdown-item" id="loginMenuBtn" style="width: 100%; text-align: left; padding: 10px; border: none; background: none; cursor: pointer;">
                    <i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç
                </button>
                <button class="dropdown-item" id="registerMenuBtn" style="width: 100%; text-align: left; padding: 10px; border: none; background: none; cursor: pointer;">
                    <i class="fas fa-user-plus"></i> –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
                <button class="dropdown-item" id="guestMenuBtn" style="width: 100%; text-align: left; padding: 10px; border: none; background: none; cursor: pointer;">
                    <i class="fas fa-user-secret"></i> –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫–∞–∫ –≥–æ—Å—Ç—å
                </button>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            setTimeout(() => {
                const loginMenuBtn = document.getElementById('loginMenuBtn');
                if (loginMenuBtn) {
                    loginMenuBtn.addEventListener('click', function() {
                        document.getElementById('authModal').style.display = 'flex';
                        document.querySelector('[data-tab="login"]').click();
                    });
                }
                
                const registerMenuBtn = document.getElementById('registerMenuBtn');
                if (registerMenuBtn) {
                    registerMenuBtn.addEventListener('click', function() {
                        document.getElementById('authModal').style.display = 'flex';
                        document.querySelector('[data-tab="register"]').click();
                    });
                }
                
                const guestMenuBtn = document.getElementById('guestMenuBtn');
                if (guestMenuBtn) {
                    guestMenuBtn.addEventListener('click', async function() {
                        try {
                            await auth.signInAnonymously();
                            showMessage('–í—ã –≤–æ—à–ª–∏ –∫–∞–∫ –≥–æ—Å—Ç—å');
                        } catch (error) {
                            showMessage('–û—à–∏–±–∫–∞: ' + error.message, 'error');
                        }
                    });
                }
            }, 100);
        }

        function showMessage(message, type = 'success') {
            // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const messageEl = document.createElement('div');
            messageEl.textContent = message;
            messageEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'error' ? '#dc3545' : '#28a745'};
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                box-shadow: 0 3px 10px rgba(0,0,0,0.2);
                z-index: 3000;
                max-width: 300px;
            `;
            
            document.body.appendChild(messageEl);
            
            setTimeout(() => {
                messageEl.style.opacity = '0';
                messageEl.style.transition = 'opacity 0.3s';
                setTimeout(() => {
                    document.body.removeChild(messageEl);
                }, 300);
            }, 3000);
        }

        // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        window.firebaseDemo = {
            auth: () => auth,
            signOut: () => auth.signOut(),
            getUser: () => auth.currentUser,
            showMessage: showMessage
        };
    </script>
</body>
</html>
